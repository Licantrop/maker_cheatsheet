# 3D Printing Cheat Sheet

## Table of contents
* [Extruder Calibration](#extruder-calibration)
* [Selective Infill](#selective-infill)
* [Hole Cleaning](#hole-cleaning)

## Extruder Calibration
This is for Prusa i3 MK2s and based on a summary of [Matt's Hub article](https://mattshub.com/2017/04/19/extruder-calibration/)

### Calibrate extruder steps/mm

1. Mark the filament at 120mm on top of the extruder
1. Set extruder in relative mode
    ```gcode
    M83
    ```
1. Extrude 100mm plastic
    ```gcode
    G1 E100 F100
    ```
1. Mesure filament distance between the mark and top of extruder, for example: `26mm`
1. Calculate how much plastic has been extrude: `120 - 26 = 94mm`
1. Get existing steps/mm value
    1. ```gcode
         M503
         ```
    1. Get the E value of command M92, for example `Recv: echo:  M92 X100.00 Y100.00 Z400.00 E161.30`
1. Calculate new extruder steps/mm : `161.3 * 100 / 94`
1. Save to printer
    ```gcode
    M92 E171.6
    M500
    ```
Note that on latest Prusa i3 MK2(s) firmware the M500 command is not persistent. The new saved value will be reset when power off and on the printer. To save it constantly to the printer add it at the start of each gcode generated by the slicer :
1. In slic3r Prusa Edition : `Printer Settings -> Custom G-code -> Start G-Code`
1. At the end of the G-code, add the previous command : `M92 E171.6`

### Calibrating extrusion multiplier
1. Add to Slic3r a 25x25x25 cube in vase mode (infill to 0%, perimeters to 1, top solid layers to 0)
1. Set resolution to 0.15
1. Export gcode and print it
1. Get your extrusion width in slic3r : `Print Settings -> Advanced -> Extrusion width -> Default extrusion width`, for exampe `0.45mm`
1. Get your current extrusion multiplier in slic3r : `Filament Settings -> Filament -> Filament -> Extrusion multiplier`, for example `0.99mm`
1. Mesure each wall of the cube, for example `0.48mm`
1. Calculate new extrusion multiplier : `(0.45/0.48) * 0.99 = 0.93`
1. Print again the cube and check walls are correct


## Selective Infill

Selective infill is a technic used to put solid infill in critical places (like around a screw hole).

Here are common parameters for applying selective infill in Fusion 360 with Slic3r Prusa Edition 1.37.1.

#### Horizontal (compared to heated bed)

| Parameter | Expression | Value |
|:---------:|:----------:|:-----:|
| layer_height          | 0.20mm | 0.20 |
| extrusion_width       | 0.45mm | 0.45 |
| num_perimeters        | 3 | 3 |
| selective_infill_horizontal_height | layer_height + 0.001 | 0.201 |
| selective_infill_to_perimeter      | (num_perimeters + 2.5) * extrusion_width | 2.475 |


#### Vertical (compared to heated bed)

| Parameter | Expression | Value |
|:---------:|:----------:|:-----:|
| layer_height          | 0.20mm | 0.20 |
| num_top_bottom        | 5 | 5 |
| selective_infill_vertical_height   | 0.101mm | 0.101 |
| selective_infill_to_top_bottom     | (num_top_bottom + 2.5) * layer_height | 1.50 |


## Hole Cleaning

Used to put more space on top of a vertical hole and avoid cleanup after printing

![Hole Cleaning Diagram](img/hole_cleaning_diagram.png)

| Hole size | h | w | a |
|:---:|:---:|:---:|:---:|
| 4.4mm (M4) | layer_height + 0.001 | 2.6mm | 45° |
| 5.3mm (M5) | layer_height + 0.001 | 3mm | 45° |